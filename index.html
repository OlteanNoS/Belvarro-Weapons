<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>FiveM Craft Calculator</title>
<style>
body {margin:0;font-family:Arial;background:#111;display:flex;justify-content:center;align-items:center;height:100vh;}
.container {background: rgba(0,0,0,0.85); padding:30px; width:750px; border-radius:10px; color:white;}
select, input, button {width:100%; padding:8px; margin-top:10px;}
button {cursor:pointer; background:#2ecc71; border:none; color:white; font-weight:bold;}
.result {margin-top:20px; padding:15px; background:#222; border-radius:8px;}
h3 {margin:10px 0 5px 0;}
label{display:block;margin:5px 0;}
</style>
</head>
<body>
<div class="container">
<h3>Ce vrei să craftezi?</h3>
<select id="weaponSelect"><option value="">-- Selectează arma --</option></select>

<div id="bulletsSection" style="display:none;">
<h3>Câte gloanțe vrei?</h3>
<select id="bullets">
<option value="100">100</option>
<option value="200">200</option>
<option value="250">250</option>
<option value="300">300</option>
<option value="400">400</option>
<option value="500">500</option>
<option value="600">600</option>
<option value="700">700</option>
<option value="800">800</option>
<option value="900">900</option>
<option value="1000">1000</option>
<option value="1500">1500</option>
<option value="2000">2000</option>
</select>
</div>

<div id="attachmentsSection" style="display:none;">
<h3>Atașamente</h3>
<label><input type="checkbox" value="none" id="noAttach"> Nu vreau atașamente</label>
<div id="attachmentList"></div>
</div>

<div id="quantitySection" style="display:none;">
<h3>Câte arme vrei?</h3>
<input type="number" id="weaponQty" min="1" value="1">
</div>

<button id="calcBtn" style="display:none;">Calculează</button>

<div id="result" class="result" style="display:none;"></div>
</div>

<script>
// ================== STRUCTURA ARME ==================
const weapons = {
"PISTOL":{type:"craft",materials:{steel:8,screw:80,barrel:0,spring:1,wood:0,polymer:20},
    bullets:{100:{powder:100,price:5400},200:{powder:200,price:10666},250:{powder:250,price:13333}},
    attachments:{lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},amortizor:{steel:2,screw:5,polymer:2},incarcator:{steel:1,screw:5,arc:1,polymer:1}}
},
"COMBAT PISTOL":{type:"craft",materials:{steel:8,screw:85,barrel:0,spring:0,wood:0,polymer:18},
    bullets:{100:{powder:100,price:5400},200:{powder:200,price:10700},250:{powder:250,price:13400}},
    attachments:{lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},amortizor:{steel:2,screw:5,polymer:2},incarcator:{steel:1,screw:5,arc:1,polymer:1}}
},
"PISTOL MK2":{type:"craft",materials:{steel:9,screw:91,barrel:0,spring:1,wood:0,polymer:22},
    bullets:{100:{powder:130,price:7000},200:{powder:260,price:13900},250:{powder:325,price:17400}},
    attachments:{incarcator:{steel:1,screw:5,arc:1,polymer:1},mounted_scope:{steel:2,screw:10,polymer:2,lupa:1},amortizor:{steel:2,screw:5,polymer:2},lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1}}
},
"CERAMIC PISTOL":{type:"craft",materials:{steel:9,screw:91,barrel:0,spring:1,wood:0,polymer:18},
    bullets:{100:{powder:130,price:7000},200:{powder:260,price:13900},250:{powder:325,price:17400}},
    attachments:{amortizor:{steel:2,screw:5,polymer:2},incarcator:{steel:1,screw:5,arc:1,polymer:1}}
},
"PISTOL WM29 (XM3)":{type:"craft",materials:{steel:10,screw:95,barrel:0,spring:1,wood:0,polymer:20},
    bullets:{100:{powder:130,price:7000},200:{powder:260,price:13900},250:{powder:325,price:17400}},
    attachments:{amortizor:{steel:2,screw:5,polymer:2}}
},
"MICRO SMG":{type:"craft",materials:{steel:15,screw:95,barrel:1,spring:1,wood:0,polymer:42},
    bullets:{100:{powder:150,price:8000},200:{powder:300,price:16000},250:{powder:375,price:20000}},
    attachments:{luneta:{steel:2,screw:10,polymer:2,lupa:1},lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},amortizor:{steel:3,screw:5,polymer:3},incarcator:{steel:2,screw:10,arc:1,polymer:2}}
},
"MACHINE PISTOL (Tec9)":{type:"craft",materials:{steel:12,screw:100,barrel:0,spring:1,wood:0,polymer:38},
    bullets:{100:{powder:150,price:8000},200:{powder:300,price:16000},250:{powder:375,price:20000}},
    attachments:{incarcator:{steel:2,screw:8,arc:1,polymer:2},amortizor:{steel:2,screw:5,polymer:2}} // Fără baterie
},
"MINI SMG":{type:"craft",materials:{steel:11,screw:97,barrel:0,spring:1,wood:1,polymer:36},
    bullets:{100:{powder:150,price:8000},200:{powder:300,price:16000},250:{powder:375,price:20000}},
    attachments:{incarcator:{steel:2,screw:10,arc:1,polymer:2}}
},
"TEC PISTOL (Tactical SMG)":{type:"craft",materials:{steel:14,screw:115,barrel:1,spring:1,wood:0,polymer:44},
    bullets:{100:{powder:180,price:10000},200:{powder:360,price:19000},250:{powder:450,price:24000}},
    attachments:{luneta:{steel:2,screw:10,polymer:2,lupa:1},incarcator:{steel:2,screw:10,arc:1,polymer:2},suppressor:{steel:3,screw:5,polymer:3}}
},
"SMG":{type:"craft",materials:{steel:13,screw:105,barrel:1,spring:1,wood:0,polymer:48},
    bullets:{100:{powder:180,price:10000},200:{powder:360,price:19000},250:{powder:450,price:24000}},
    attachments:{incarcator:{steel:2,screw:10,arc:1,polymer:2},baterie:{steel:3,screw:20,arc:1,polymer:3},lanterna:{steel:1,screw:5,arc:1,polymer:1,bec:1,lupa:1},amortizor:{steel:3,screw:5,polymer:3},luneta:{steel:2,screw:10,polymer:2,lupa:1}}
},
// Armele pe bani
"NAVY PISTOL":{type:"money",price:400000,attachments:{}},
"VINTAGE PISTOL":{type:"money",price:25000,attachments:{incarcator:{steel:1,screw:5,arc:1,polymer:1},amortizor:{steel:2,screw:5,polymer:2}}},
"DB":{type:"money",price:250000,attachments:{}},
"ASSAULTRIFLE MK2 (AK)":{type:"money",price:70000,attachments:{}},
"HEAVYRIFLE":{type:"money",price:60000,attachments:{}},
"COMBAT MG MK2":{type:"money",price:120000,attachments:{}},
"GUSENBERG":{type:"money",price:45000,attachments:{}},
"COMBAT MG":{type:"money",price:90000,attachments:{}}
};

// ================== LOGICA UI PROGRESIV ==================
const weaponSelectEl = document.getElementById("weaponSelect");
const bulletsSection = document.getElementById("bulletsSection");
const attachmentsSection = document.getElementById("attachmentsSection");
const quantitySection = document.getElementById("quantitySection");
const calcBtn = document.getElementById("calcBtn");
const attachList = document.getElementById("attachmentList");

Object.keys(weapons).forEach(w=>{
    const opt = document.createElement("option");
    opt.value=w; opt.text=w;
    weaponSelectEl.appendChild(opt);
});

weaponSelectEl.addEventListener("change",()=>{
    const weapon = weapons[weaponSelectEl.value];
    document.getElementById("result").style.display="none";
    attachList.innerHTML="";
    calcBtn.style.display="none";
    bulletsSection.style.display="none";
    attachmentsSection.style.display="none";
    quantitySection.style.display="none";

    if(!weapon) return;

    if(weapon.type==="craft") bulletsSection.style.display="block";
    attachmentsSection.style.display="block";

    // Atașamente
    if(weapon.attachments){
        Object.keys(weapon.attachments).forEach(att=>{
            const lbl = document.createElement("label");
            lbl.innerHTML=`<input type="checkbox" class="attachCheck" value="${att}"> ${att}`;
            attachList.appendChild(lbl);
        });
    }
    quantitySection.style.display="block";
    calcBtn.style.display="block";
});

document.getElementById("noAttach").addEventListener("change",function(){
    const checks = document.querySelectorAll(".attachCheck");
    if(this.checked){
        checks.forEach(c=>c.checked=false);
        checks.forEach(c=>c.disabled=true);
    }else checks.forEach(c=>c.disabled=false);
});

// ================== CALCUL ==================
calcBtn.addEventListener("click",()=>{
    const weaponKey = weaponSelectEl.value;
    if(!weaponKey) return;
    const weapon = weapons[weaponKey];
    const qty = parseInt(document.getElementById("weaponQty").value)||1;

    const totals = {steel:0,screw:0,barrel:0,spring:0,wood:0,polymer:0,powder:0};
    if(weapon.type==="craft"){
        for(let k of ["steel","screw","barrel","spring","wood","polymer"])
            totals[k]+=weapon.materials[k]*qty;

        const bullets = parseInt(document.getElementById("bullets").value);
        const baseBullet = weapon.bullets[bullets]||weapon.bullets[100];
        totals.powder += baseBullet.powder*qty;
    }

    const selectedAttachments = document.querySelectorAll(".attachCheck:checked");
    selectedAttachments.forEach(att=>{
        const data = weapon.attachments[att.value];
        if(!data) return;
        for(let k of ["steel","screw","barrel","spring","wood","polymer"])
            totals[k]+= (data[k]||0)*qty;
    });

    // calcul cost
    let totalCost=0;
    if(weapon.type==="craft"){
        totalCost += totals.steel*5000;
        totalCost += Math.floor(totals.screw/20)*5000;
        totalCost += totals.barrel*4*5000;
        totalCost += totals.polymer*150;

        const bullets = parseInt(document.getElementById("bullets").value);
        const baseBullet = weapon.bullets[bullets]||weapon.bullets[100];
        totalCost += baseBullet.price*qty;
    } else totalCost += weapon.price*qty;

    const r = document.getElementById("result");
    r.style.display="block";
    r.innerHTML=`<h3>Rezultat</h3>
    Oțel: ${totals.steel}<br>
    Șurub: ${totals.screw}<br>
    Țeavă: ${totals.barrel}<br>
    Arc: ${totals.spring}<br>
    Lemn: ${totals.wood}<br>
    Polimer: ${totals.polymer}<br>
    Praf de pușcă: ${totals.powder}<br>
    <br><strong>Cost total estimativ: ${totalCost.toLocaleString()}$</strong>`;
});
</script>
</body>
</html>
